# PROJECT_SETTINGS.md

## 🔧 プロジェクト設定・命名規則

### 📋 **必須命名規則**

#### **1. Pythonファイル名規則**
- **❌ 禁止**: 固有名詞（kaname等）をファイル名に含める
- **✅ 正しい例**: 
  - `run_batch_v034.py`
  - `run_small_test_v034.py`
  - `extract_character.py`
  - `batch_processor.py`
- **❌ 間違い例**:
  - `run_kaname09_v034_batch.py`
  - `extract_kaname03.py`
  - `batch_kaname07_10images.py`

#### **2. 出力ファイル名規則**
- **✅ 原則**: 出力ファイル名は入力ファイル名と**完全同一**にする
- **理由**: 評価システムとの互換性確保
- **✅ 正しい例**:
  - 入力: `kaname09_000_cover.jpg` → 出力: `kaname09_000_cover.jpg`
  - 入力: `test_image.png` → 出力: `test_image.png`
- **❌ 間違い例**:
  - 入力: `kaname09_000_cover.jpg` → 出力: `test_001_kaname09_000_cover.jpg`
  - 入力: `image.jpg` → 出力: `processed_image.jpg`

#### **3. 関数・クラス名規則**
- **✅ 原則**: 機能を表す汎用的な名前を使用
- **✅ 正しい例**:
  - `extract_character_from_path()`
  - `process_batch_images()`
  - `CharacterExtractor`
- **❌ 間違い例**:
  - `extract_kaname_character()`
  - `process_kaname_batch()`

---

## 🔍 **開発前必須チェックリスト**

### **実装前確認事項**
- [ ] Pythonファイル名に固有名詞が含まれていないか？
- [ ] 出力ファイル名が入力ファイル名と同じになるか？
- [ ] 評価システムとの互換性が確保されているか？
- [ ] 関数・クラス名が汎用的で再利用可能か？

### **バッチ処理実装時の確認事項**
- [ ] 出力ファイル名生成ロジックが正しいか？
- [ ] 番号プレフィックスを付けていないか？
- [ ] ファイル拡張子が保持されているか？
- [ ] パス区切り文字が正しく処理されているか？

### **品質評価システム連携時の確認事項**
- [ ] 入力ファイル名と出力ファイル名が一致するか？
- [ ] マスクファイル名の命名規則が統一されているか？
- [ ] 透明背景版ファイル名の命名規則が統一されているか？

---

## 📚 **技術的背景**

### **なぜ固有名詞を避けるか？**
1. **再利用性**: 汎用的なコードとして他のプロジェクトでも使用可能
2. **保守性**: 特定のデータセットに依存しない設計
3. **可読性**: 機能が明確で理解しやすいコード

### **なぜ出力ファイル名を同じにするか？**
1. **評価システム互換性**: 自動評価時にファイル名でマッチング
2. **トレーサビリティ**: 入力と出力の対応関係が明確
3. **データ管理**: ファイル管理が簡単

### **標準的なファイル名パターン**
```python
# 正しい出力ファイル名生成
input_file = Path("kaname09_000_cover.jpg")
output_file = Path(output_dir) / input_file.name  # 同じ名前を使用

# マスクファイル名
mask_file = Path(output_dir) / f"{input_file.stem}_mask.png"

# 透明背景版ファイル名
transparent_file = Path(output_dir) / f"{input_file.stem}_transparent.png"
```

---

## ⚠️ **重要な注意事項**

### **既存ファイルの扱い**
- 既存のPythonファイル名で固有名詞を含むものは段階的に修正
- 互換性を保ちながら徐々に移行
- 修正時は必ず動作確認を実施

### **エラーが発生した場合**
1. まずファイル名・パスの確認
2. 出力ファイル名が入力ファイル名と一致しているか確認
3. 評価システムとの互換性を確認

### **新機能追加時の必須確認**
- この設定文書を必ず確認
- チェックリストを実行
- 命名規則に従っているか検証

---

## 🔄 **更新履歴**

### v1.0.0 (2025-07-18)
- 初版作成
- 基本的な命名規則を設定
- 開発前チェックリスト追加
- バッチ処理・評価システム連携の注意事項明記

---

**重要**: このドキュメントは開発の基盤となる重要な設定です。  
新しい機能を追加する際は、必ずこの規則に従って実装してください。